[package]
name = "opp"
authors = ["29 <791603901@qq.com>"]
version = "0.0.4"
license = "MIT/Apache-2.0"
readme = "README.md"
keywords = ["http", "ipc", "gateway", "tokio", "plug-in"]
categories = ["asynchronous", "authentication", "network-programming", "web-programming", "web-programming::websocket"]
repository = "https://github.com/opensound-org/opp"
homepage = "https://github.com/opensound-org/opp"
documentation = "https://docs.rs/opp"
description = """
ğŸš§ OpenPlugin Protocol (WIP, nothing usable for now).
"""
edition = "2021"

# Because the highest MSRV `tokio` is 1.70.0
# å› ä¸ºMSRVæœ€é«˜çš„`tokio`æ˜¯1.70.0
rust-version = "1.70.0"

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
# ast deps
anyhow = "1.0.89"

# Universal dependencies
# é€šç”¨ä¾èµ–
tokio = { version = "1.40.0", features = [] }

# Universal optional dependencies
# é€šç”¨å¯é€‰ä¾èµ–
tracing = { version = "0.1.40", optional = true }

# Kernel dependencies
# å†…æ ¸ä¾èµ–
http-body-util = { version = "0.1.2", optional = true }
hyper = { version = "1.4.1", optional = true }
hyper-util = { version = "0.1.8", features = ["tokio", "server-auto", "server-graceful"], optional = true }

# Gadget dependencies
# Gadgetä¾èµ–

# All dependencies required for each demo Gadgets and Kernel binary
# å„æ¼”ç¤ºGadgetåŠKerneläºŒè¿›åˆ¶éœ€è¦çš„æ‰€æœ‰ä¾èµ–é¡¹
tracing-subscriber = { version = "0.3.18", features = ["chrono"], optional = true }

[target.'cfg(windows)'.dependencies]
# https://github.com/tokio-rs/tracing/issues/3068
nu-ansi-term = { version = "0.50.1", optional = true }

[features]
tracing = ["dep:tracing"]
kernel = ["tokio/net", "dep:http-body-util", "dep:hyper", "dep:hyper-util"]

# The feature set required for all binaries
# æ‰€æœ‰äºŒè¿›åˆ¶éƒ½éœ€è¦çš„ç‰¹æ€§é›†åˆ
bin = ["tracing", "tokio/rt-multi-thread", "tokio/macros", "dep:tracing-subscriber", "dep:nu-ansi-term"]

# Feature that needs to be enabled for binary `opk` (OpenPlugin Kernel)
# äºŒè¿›åˆ¶`opk`ï¼ˆOpenPlugin Kernelï¼‰éœ€è¦å¯ç”¨çš„ç‰¹æ€§
opk = ["kernel", "bin"]

default = ["opk"]

[[bin]]
name = "opk"
path = "src/main.rs"
required-features = ["opk"]
